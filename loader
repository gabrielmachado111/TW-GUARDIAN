// ==UserScript==
// @name         Loader Guardian
// @namespace    http://tampermonkey.net/
// @version      1.2
// @description  Carrega script Guardian remoto + validação automática do nick (repositório TW-GUARDIAN!)
// @author       Gabriel
// @match        *://*.tribalwars.com.br/*
// @grant        GM_xmlhttpRequest
// @grant        GM_getValue
// @grant        GM_setValue
// ==/UserScript==

(function() {
    function domReady() {
        return new Promise(res => {
            if (document.readyState === "complete" || document.readyState === "interactive") res();
            else document.addEventListener("DOMContentLoaded", res, { once: true });
        });
    }
    domReady().then(() => {
        GM_xmlhttpRequest({
            method: 'GET',
            url: 'https://raw.githubusercontent.com/gabrielmachado111/TW-GUARDIAN/main/guardian-main.js?_=' + Date.now(),
            onload: function(r) {
                try {
                    eval(r.responseText); // Roda todo o Guardian isolado
                } catch (e) {
                    alert("Erro ao carregar o script Guardian.");
                    console.error(e);
                }
            }
        });
    });
})();
